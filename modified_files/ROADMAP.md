# Hoja de Ruta Futura (Roadmap)

EL AGENTE NO DEBE EDITAR ESTE ARCHIVO, S√ìLO LEERLO. EL USUARIO LO EDITAR√Å CUANDO SEA NECESARIO.

Este archivo rastrea las caracter√≠sticas planificadas, mejoras y problemas conocidos a abordar en futuras versiones de Kick VOD Downloader.

## üîÆ Pr√≥xima versi√≥n v2.1.0 (Cuando se termina de trabajar en la lista de funciones y arreglo de bugs se debe subir de versi√≥n en los manifest)

### üêõ Correcciones y Mejoras
- [x] **Visualizaci√≥n de Bitrate en Windows**: Investigar por qu√© el Explorador de Archivos de Windows ignora el √°tomo `btrt` y muestra valores incorrectos (ej. 19kbps), a pesar de que el archivo es v√°lido y funciona en editores.
    - *Soluci√≥n*: Se implement√≥ la inyecci√≥n del √°tomo `btrt` (Bitrate Box) en la estructura MP4 dentro de `avc1`. Esto permite que Windows lea correctamente el bitrate promedio y m√°ximo.

---

### ‚ú® Solicitudes de Funcionalidades
- [x] **Agregar un modo Moderador** Esto descargar√≠a el VOD autom√°ticamente al terminar el directo (explicado en la l√≠nea 19)

---

## üí° Ideas para M√°s Adelante
- [x] **Agregar una opci√≥n para descargar el √∫ltimo VOD de un canal autom√°ticamente cuando se termine de emitir. Quiza detectando algo que aparezca si o si al momento de cortar stream, c√≥mo la pantalla de "Stream Finalizado" con el elemento que diga "CANAL est√° fuera de l√≠nea"** (Lo de la l√≠nea 20 lo saqu√© del "Inspeccionar" de la p√°gina cuando el canal est√° fuera de l√≠nea) (Agrego otra cosa en la l√≠nea 21 relacionada a esto) (El bot√≥n debe armonizar con el contenido de la p√°gina y debe tener una animaci√≥n con tonos verdes cuando est√© activo, desactivado por defecto)
<div class="z-player bg-surface-base absolute ml-7 mt-7 flex h-fit w-fit items-center gap-4 rounded p-5 font-bold leading-[1.2]" style="transform: none;"><div class="bg-surfaceInverse-base text-surfaceInverse-onInverse flex items-center justify-center rounded-sm px-1 py-1 text-sm uppercase">Desconectado</div><h2 class="text-white text-base lg:text-2xl leading-[1.2] font-bold">Eskrotos est√° fuera de l√≠nea</h2></div>
- [PENDIENTE DE TEST] **Que cuando la descarga autom√°tica est√© activa, se rechace cualquier posible hosteo (redirect a otro canal) que haya puesto el streamer en la transmisi√≥n. En adici√≥n a esto, se debe mostrar un mensaje de advertencia al usuario al momento de activar la descarga autom√°tica, explicando que comenzar√° 2 minutos luego de que el stream se detenga para dar tiempo a la API de Kick y que no debe abandonar la p√°gina.**
- [x] **Cuando el elemento de "Stream Finalizado" con el mensaje "CANAL est√° fuera de l√≠nea" aparezca, el toggle se volver√° invisible, para que no se pueda usar mientras el canal est√° fuera de l√≠nea.**
- [x] **Que en cada miniatura de VOD, se muestre el bot√≥n de "descargar", dando las opciones de trim y full download sin necesidad de entrar a la p√°gina del VOD.**
- [x] **el toggle de "Descargar VOD al finalizar el directo" ser√° visible y utilizable SI Y SOLO SI el usuario es moderador (Se dibujar√° al lado del √≠cono de Kick si el bot√≥n "Abrir el panel de moderaci√≥n" est√° visible)** C√≥digo del bot√≥n de "Abrir el panel de moderaci√≥n": <a href="https://dashboard.kick.com/moderator/thenestorhd" class="group relative box-border flex shrink-0 grow-0 select-none items-center justify-center gap-2 whitespace-nowrap rounded font-semibold ring-0 transition-all focus-visible:outline-none active:scale-[0.95] disabled:pointer-events-none [&amp;_svg]:size-[1em] state-layer-surface bg-transparent text-white [&amp;_svg]:fill-current lg:data-[state=open]:bg-surface-highest data-[state=active]:bg-surface-highest disabled:text-neutral-600 size-10 text-base leading-none" rel="external noopener" aria-label="Abrir el panel de Moderaci√≥n" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="white"><path fill-rule="evenodd" clip-rule="evenodd" d="M27.56 3.04003C29.14 3.75003 30.23 5.34003 30.23 7.18003L30.21 7.17003C30.2 9.10003 28.99 10.76 27.29 11.42L27.74 18.66C27.82 19.87 26.86 20.88 25.66 20.88C24.46 20.88 23.51 19.86 23.58 18.66L24.03 11.42C22.33 10.76 21.11 9.10003 21.11 7.17003C21.11 5.33003 22.21 3.74003 23.78 3.03003V7.09003L25.67 8.24003L27.56 7.09003V3.04003ZM13.81 15.86C17.3502 15.86 20.22 12.9901 20.22 9.44998C20.22 5.90983 17.3502 3.03998 13.81 3.03998C10.2699 3.03998 7.40002 5.90983 7.40002 9.44998C7.40002 12.9901 10.2699 15.86 13.81 15.86ZM24.5601 26.19C24.5601 21.78 20.9901 18.21 16.5801 18.21H11.0401C6.63006 18.21 3.06006 21.78 3.06006 26.19V29.12H24.5601V26.19Z" fill="current"></path></svg></a>
- [x] **IMPORTANTE**: El audio se des-sincroniza cuando el video se importa a un editor c√≥mo Premiere y hay problemas de visualizaci√≥n en VLC y Videos de Win11 (El video no se ve, pero se oye)
- [x] **Evitar que la pesta√±a entre en modo de inactividad por estar mucho tiempo en segundo plano SOLAMENTE cuando se est√° realizando una descarga o cuando la descarga autom√°tica est√° activa.**
- [x] **Cuando la descarga se cancele, autom√°ticamente se debe recargar la p√°gina INMEDIATAMENTE para que se limpie todo**
- [x] **Easter Egg**: Si el usuario escribe en el chat "Imaginate un cubo" (sin importar las may√∫sculas o min√∫sculas), aparecer√° un cubo que saltar√° por toda la pantalla durante 5 segundos, al terminar los 5 segundos, el cubo saldr√° de la pantalla y desaparecer√°.**
- [x] **Trucos**: Si en el chat del stream el usuario escribe "Si le doy un cabezazo al teclado soy admin" (sin importar las may√∫sculas o min√∫sculas), el usuario desbloquear√° el modo Streamer y podr√° activar la descarga autom√°tica y toda funci√≥n que requiera ser moderador. Este desbloqueo es PERMANENTE.**
- Info del cuadro de texto del chat para los puntos 28 y 29: <div class="relative w-full" dir="ltr"><div data-input="true" enterkeyhint="send" class="editor-input" contenteditable="true" data-testid="chat-input" role="textbox" spellcheck="true" style="outline: none; user-select: text; white-space: pre-wrap; word-break: break-word;" data-lexical-editor="true"><p class="editor-paragraph"><br></p></div><div class="pointer-events-none absolute left-2.5 top-1/2 -translate-y-1/2 select-none pl-[1px] text-sm font-medium leading-[1.15] text-[#768087]">Enviar un mensaje</div></div>
- En los puntos 28 y 29, cuando se escriban los textos de los easter eggs o trucos, estos se disparar√°n de manera autom√°tica y el texto se eliminar√° del cuadro de texto del chat.
- [x] **El truco "Ser admin me da ansiedad" desactiva el modo admin de TODOS los canales.
- [x] **Nueva feature s√≥lo para admins**: Si es moderador del canal, puede clickear en el √≠cono de la extensi√≥n para activar una biblioteca personalizable de comandos/mensajes que pueden ser usados en el chat del canal. Cuando clickee en el mensaje, este se enviar√° al chat del canal. Lo mismo si es un comando. Podr√° agregar, editar y eliminar mensajes. Esto para evitar tener que ir al chat y escribir los comandos/mensajes cada vez que se necesite.
- [SIEMPRE REVISAR ESTE √çTEM DE LA LISTA] **Agregar los Easter Eggs y/o trucos que falten, detallados en "trucos.md"**
- [x] **Hacer que las funciones de admin est√©n disponibles el panel de moderaci√≥n de Kick** Auto-DL visible en el centro del contenedor superior (c√≥digo del item en la l√≠nea 39)  Enlace: https://dashboard.kick.com/moderator/CANAL
- [x] **Agregar un bot√≥n a la izquierda de tu foto de perfil (C√≥digo del item en la l√≠nea 40) que redireccione al listado de VODs del canal** Enlace: https://kick.com/CANAL/videos
<nav class="bg-surface-lowest sticky top-0 z-[402] flex h-[--navbar-height] items-center justify-between gap-0 pl-3 pr-10 group-data-[theatre=true]/main:!hidden lg:relative" style="box-shadow:0px 2px 4px 0px rgba(0, 0, 0, 0.2)"><div class="flex grow-0 items-center gap-2.5"><a class="shrink-0" title="Home" href="https://kick.com"><img src="/img/kick-logo.svg" alt="Kick Logo" width="97" height="26"></a><span class="contents"><section class="flex w-full flex-col p-3"><button type="button" id="radix-_R_6onabsnjb_" aria-haspopup="menu" aria-expanded="false" data-state="closed" variant="highlight" class="group flex w-full items-center justify-between gap-11 px-1.5 py-1 focus-visible:outline-none"><div class="flex items-center gap-2 text-left"><div class="group relative flex aspect-square shrink-0 items-center size-7 lg:size-7"><div class="aspect-square w-full overflow-hidden rounded-full"><img alt="Eskrotos" class="betterhover:group-hover:scale-110 aspect-square w-full select-none transition-transform duration-300 ease-in-out" draggable="false" src="https://files.kick.com/images/user/32044511/profile_image/conversion/3f41ee88-0a23-47d6-bf57-50b6fe7982ed-fullsize.webp"></div></div><div class="flex w-full items-center gap-1 overflow-hidden"><div class="flex min-w-0 max-w-full shrink grow flex-col gap-0.5"><span class="shrink truncate text-sm font-bold leading-[1.2]">Eskrotos</span><span class="text-subtle truncate text-xs font-bold leading-normal">Acceso de moderador</span></div></div></div><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="white" class="opacity-75 transition-transform group-data-[state=open]:rotate-180 size-4 text-white"><path d="M28.46 6L16 18.7533L3.54 6L0 9.62334L16 26L16.02 25.9591L32 9.62334L28.46 6Z" fill="current"></path></svg></button></section></span></div><div class="flex items-center gap-5"><button type="button" id="radix-_R_18nabsnjb_" aria-haspopup="menu" aria-expanded="false" data-state="closed" variant="highlight" class="group shrink-0"><img src="https://files.kick.com/images/user/2178169/profile_image/conversion/05b61e23-f027-4ada-bf1f-e9ca57c93a83-medium.webp" alt="TheNestorHD" class="size-8 rounded-full lg:box-content"></button></div></nav>
<button type="button" id="radix-_R_18nabsnjb_" aria-haspopup="menu" aria-expanded="false" data-state="closed" variant="highlight" class="group shrink-0"><img src="https://files.kick.com/images/user/2178169/profile_image/conversion/05b61e23-f027-4ada-bf1f-e9ca57c93a83-medium.webp" alt="TheNestorHD" class="size-8 rounded-full lg:box-content"></button>
C√≥digo del campo de texto del chat del panel de moderaci√≥n: <div data-input="true" enterkeyhint="send" class="editor-input" contenteditable="true" data-testid="chat-input" role="textbox" spellcheck="true" data-lexical-editor="true" style="outline: none; user-select: text; white-space: pre-wrap; word-break: break-word;"><p class="editor-paragraph"><br></p></div>
- [x] **Notificaciones de Escritorio**: Implementar notificaciones nativas del navegador para avisar cuando una descarga finaliza o falla, √∫til si el usuario est√° en otra pesta√±a o aplicaci√≥n. (S√≥lamente si el usuario NO est√° en la pesta√±a)
- [x] **Selector de Calidad**: A√±adir un selector en la interfaz para permitir a los usuarios elegir entre diferentes calidades de video disponibles para descargar. Esto podr√≠a mejorar la experiencia del usuario al adaptarse a sus necesidades y conexiones de red.
- [PENDIENTE] **Protecci√≥n contra Hosts**: Cuando el Auto-DL est√© activo, la extensi√≥n buscar√° cada 2 segundos el bot√≥n de rechazar host y lo clickear√° autom√°ticamente. Esto evitar√° que el host bloquee la descarga autom√°tica por redirecci√≥n. (c√≥digo del bot√≥n sacado con la herramienta de "Inspeccionar" en la l√≠nea 45)
(Estoy esperando a dar con un canal que est√© por hostear a otro para sacar el c√≥digo del bot√≥n)
- [x] **Auto-Retry Mejorado**: Sistema m√°s robusto de reintentos autom√°ticos ante fallos de red temporales durante la descarga de chunks.
- [ ] **Cambiar toggler de Auto-DL**: En el Dashboard del canal se debe cambiar el toggler a un bot√≥n que te redireccione al canal (desde https://dashboard.kick.com/moderator/CANAL a https://kick.com/CANAL) y active directamente el Auto-DL.
- [ ] **

---

### üí° Ideas Propuestas (Pendientes de Evaluaci√≥n)
- [ ] **Suite de Exportaci√≥n R√°pida**: Exportar VOD o clips en formatos preconfigurados (MP4, WAV, GIF, vertical 9:16) sin usar herramientas externas.
- [ ] **Generador de Clips Inteligente**: Crear clips r√°pidos seleccionando timestamps, con previsualizaci√≥n instant√°nea y ‚Äúsnap‚Äù a escenas con picos de audio.
- [ ] **Normalizaci√≥n y Mejora de Audio**: Opciones de normalizar volumen, eliminar ruido leve y boost de voz antes de exportar.
- [ ] **Plantillas de Thumbnail**: Generar thumbnails con overlays, t√≠tulo del stream y watermark del canal en 1 click.
- [ ] **Descarga por Lotes**: Seleccionar m√∫ltiples VODs de un canal y descargarlos con cola y reintentos autom√°ticos.
- [ ] **Metadata & Archivo**: Guardar metadata (t√≠tulo, fecha, duraci√≥n, juego) junto al archivo para organizaci√≥n local.
- [ ] **Notificaciones Avanzadas**: Alertas configurables (fin de descarga, error, reconexi√≥n, reintentos) con historial en la extensi√≥n.
